<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AgroHelper</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
</head>
<body>
    <header>
        <nav class="main-nav">
            <div class="logo">
                <a href="../../index.html">üå± AgroHelper</a>
            </div>
            <ul class="nav-links">
                <!-- Home link pode ser mantido ou removido dependendo da prefer√™ncia -->
                <!-- <li><a href="../../index.html">Home</a></li> --> 
                <li><a href="index.html" class="active">Dashboard</a></li>
                <li><a href="../marketplace/index.html">Marketplace</a></li>
                <!-- Adicionar link para adicionar produto aqui ou dentro do conte√∫do -->
                <li><a href="#" id="logout-link">Sair</a></li> <!-- Link de Logout Simulado -->
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <main>
        <section class="dashboard-container">
            <h1>Meu Dashboard</h1>
            
            <div class="dashboard-grid">
                <!-- Resumo -->
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="icon">üå±</div>
                        <h3>√Årea Plantada</h3>
                        <p id="planted-area">Carregando...</p>
                    </div>
                    <div class="summary-card">
                        <div class="icon">üìà</div>
                        <h3>Produtividade</h3>
                        <p id="productivity">Carregando...</p>
                    </div>
                    <div class="summary-card">
                        <div class="icon">üíß</div>
                        <h3>Uso de √Ågua</h3>
                        <p id="water-usage">Carregando...</p>
                    </div>
                </div>

                <!-- Gr√°ficos -->
                <div class="charts">
                    <div class="chart-card">
                        <h3>Produ√ß√£o Mensal</h3>
                        <div class="chart-placeholder"></div>
                    </div>
                    <div class="chart-card">
                        <h3>Gastos por Categoria</h3>
                        <div class="chart-placeholder"></div>
                    </div>
                </div>

                 <!-- A√ß√µes R√°pidas -->
                 <div class="actions-card summary-card"> <!-- Reusing summary-card style -->
                    <div class="icon">‚ûï</div>
                    <h3>A√ß√µes R√°pidas</h3>
                    <a href="../marketplace/add-product.html" class="btn primary small" style="margin-top: 1rem;">Adicionar Produto ao Marketplace</a>
                    <!-- Outros links de a√ß√£o podem ser adicionados aqui -->
                </div>

                <!-- Previs√£o do Tempo -->
                <div class="weather-widget">
                    <h2>Previs√£o do Tempo</h2>
                    <div id="weather-widget">Carregando...</div>
                </div>

                <!-- Alertas -->
                <div class="alerts">
                    <h2>Alertas Recentes</h2>
                    <div class="alert-card warning">
                        <div class="alert-icon">‚ö†Ô∏è</div>
                        <div class="alert-content">
                            <h3>Chuva Intensa Prevista</h3>
                            <p>Previs√£o de 80mm para os pr√≥ximos 3 dias</p>
                        </div>
                    </div>
                    <div class="alert-card info">
                        <div class="alert-icon">‚ÑπÔ∏è</div>
                        <div class="alert-content">
                            <h3>Fertiliza√ß√£o Pendente</h3>
                            <p>√Årea 3 precisa de fertiliza√ß√£o</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>AgroHelper &copy; 2025</p>
    </footer>

    <script src="../../assets/js/weather.js" type="module"></script>
    <script>
        // Simula√ß√£o de Logout
        const logoutLink = document.getElementById('logout-link');
        if (logoutLink) {
            logoutLink.addEventListener('click', (event) => {
                event.preventDefault();
                // Remover token de autentica√ß√£o simulado
                localStorage.removeItem('authToken'); 
                alert('Voc√™ foi desconectado (simula√ß√£o).');
                // Redirecionar para a p√°gina de login
                window.location.href = '../auth/login.html'; 
            });
        }

        // Simula√ß√£o de verifica√ß√£o de autentica√ß√£o ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('authToken');
            if (!token) {
                alert('Voc√™ precisa estar logado para acessar o Dashboard.');
                window.location.href = '../auth/login.html'; // Redireciona se n√£o houver token
            }
            // Se houver token, a p√°gina carrega normalmente
        });
    </script>
</body>
</html>
